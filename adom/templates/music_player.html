<<<<<<< HEAD
=======
<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChord()">Play Chord</button>

<script>

  // Perform your function here for each element
   // Replace this line with your actual function


  function playChord() {




    // Define the notes, octaves, and durations as a 2D array
    const p = [['E', 'G', 'F#'], ['2', '3', '1'], ['2.0', '2.0', '0.5']];

    // Create an audio context
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    // Iterate through the notes and play them simultaneously
    for (let i = 0; i < p[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();

      // Set the frequency based on the note and octave
      const frequency = noteToFrequency(p[0][i], p[1][i]);
      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      // Set the duration and start playing
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(p[2][i]));

      // Adjust the gain for smoother sound
      gainNode.gain.setValueAtTime(1, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(p[2][i]));
    }


  }

        // Helper function to convert note and octave to frequency
  function noteToFrequency(note, octave) {
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const index = notes.indexOf(note);
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }


</script>



</body>
</html> -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChordThreeTimesWithInterval()">Play Chord</button>

<script>

  function playChord() {
    const p = [['E', 'G', 'F#'], ['2', '2', '1'], ['2.0', '2.0', '0.5']];
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    for (let i = 0; i < p[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      const frequency = noteToFrequency(p[0][i], p[1][i]);

      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(p[2][i]));

      gainNode.gain.setValueAtTime(1, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(p[2][i]));
    }
  }

  function noteToFrequency(note, octave) {
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const index = notes.indexOf(note);
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }

  function playChordThreeTimesWithInterval() {
    // Play the chord the first time
    playChord();

    // Schedule the next plays after 2-second intervals
    setTimeout(function() {
      playChord();

      setTimeout(function() {
        playChord();
      }, 2000);
    }, 2000);
  }

</script>

</body>
</html> -->


<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChordThreeTimesWithInterval()">Play Chord</button>

<script>

  function playChord(chord) {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    for (let i = 0; i < chord[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      const frequency = noteToFrequency(chord[0][i], chord[1][i]);

      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(chord[2][i]));

      gainNode.gain.setValueAtTime(1, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(chord[2][i]));
    }
  }

  function noteToFrequency(note, octave) {
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const index = notes.indexOf(note);
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }


  function playChordThreeTimesWithInterval() {
    // Play the first chord
    playChord([['E', 'G', 'F#'], ['2', '3', '1'], ['2.0', '2.0', '0.5']]);

    // Schedule the next plays after 2-second intervals
    setTimeout(function() {
      // Play the second chord
      playChord([['D', 'D', 'F#'], ['2', '2', '5'], ['2.0', '2.0', '0.5']]);

      setTimeout(function() {
        // Play the third chord
        playChord([['E', 'G', 'F#'], ['4', '2', '1'], ['2.0', '2.0', '0.5']]);
      }, 500);
    }, 500);
  }

</script>

</body>
</html> -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChordsWithIntervals()">Play Chords</button>

<script>

  function playChord(chord) {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    for (let i = 0; i < chord[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      const frequency = noteToFrequency(chord[0][i], chord[1][i]);

      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(chord[2][i]));

      gainNode.gain.setValueAtTime(1, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(chord[2][i]));
    }
  }

  function noteToFrequency(note, octave) {
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const index = notes.indexOf(note);
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }

  function playChordsWithIntervals() {
    const m = [
      [['E', 'G', 'F#'], ['2', '3', '1'], ['2.0', '2.0', '0.5']],
      [['D', 'D', 'F#'], ['2', '2', '5'], ['2.0', '2.0', '0.5']],
      [['E', 'G', 'F#'], ['4', '2', '1'], ['2.0', '2.0', '0.5']]
    ];

    let interval = 500; // Initial interval in milliseconds

    for (let i = 0; i < m.length; i++) {
      setTimeout(function() {
        playChord(m[i]);
      }, i * interval);

      interval = 1000; // Increment the interval for the next chord
    }
  }

</script>

</body>
</html> -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChordsWithIntervals()">Play Chords</button>

<script>

  function playChord(chord) {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    for (let i = 0; i < chord[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      const frequency = noteToFrequency(chord[0][i], chord[1][i]);

      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(chord[2][i]));

      gainNode.gain.setValueAtTime(1, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(chord[2][i]));
    }
  }

  function noteToFrequency(note, octave) {
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const index = notes.indexOf(note);
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }

  function playChordsWithIntervals() {
    const m = [
      [['E', 'G', 'F#'], ['2', '3', '1'], ['2.0', '2.0', '2.0']],
      [['D', 'D', 'F#'], ['2', '2', '5'], ['2.0', '2.0', '2.0']],
      [['E', 'G', 'F#'], ['4', '2', '1'], ['3.0', '3.0', '2.5']]
    ];

    let interval = parseFloat(m[0][2][0]) * 1000; // Initial interval in milliseconds

    for (let i = 0; i < m.length; i++) {
      setTimeout(function() {
        playChord(m[i]);
      }, i * interval);

      interval = Math.min(parseFloat(m[i][2][0]) * 1000, parseFloat(m[i][2][1]) * 1000, parseFloat(m[i][2][2]) * 1000);
    }
  }

</script>

</body>
</html> -->


<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChordsWithIntervals()">Play Chords</button>

<script>

  function playChord(chord) {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    for (let i = 0; i < chord[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      const frequency = noteToFrequency(chord[0][i], chord[1][i]);

      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(chord[2][i]));

      gainNode.gain.setValueAtTime(1, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(chord[2][i]));
    }
  }

  function noteToFrequency(note, octave) {
    const notes = ['C', 'C#', 'Db', 'D', 'D#', 'Eb', 'E', 'F', 'F#', 'Gb', 'G', 'G#', 'Ab', 'A', 'A#', 'Bb', 'B'];
    const index = notes.indexOf(note);
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }

  function playChordsWithIntervals() {
    const m = [[['C', 'G', 'E', 'C'], ['4', '3', '3', '3'], ['0.5', '0.5', '0.5', '1.0']],
 [['E', 'C', 'G'], ['4', '4', '3'], ['0.5', '0.5', '0.5']],
 [['G', 'C', 'E', 'C'], ['4', '4', '3', '3'], ['1.0', '1.0', '1.0', '1.0']],
 [['G', 'C', 'E', 'C'], ['4', '4', '3', '3'], ['1.0', '1.0', '1.0', '1.0']],
 [['G', 'C', 'E', 'C'], ['4', '4', '3', '3'], ['1.0', '1.0', '1.0', '1.0']],
 [['C', 'C', 'E', 'A'], ['5', '4', '3', '2'], ['0.5', '1.0', '1.0', '0.5']],
 [['B', 'G'], ['4', '2'], ['0.5', '0.5']]];

    let interval = parseFloat(m[0][2][0]) * 1000; // Initial interval in milliseconds

    for (let i = 0; i < m.length; i++) {
      setTimeout(function() {
        playChord(m[i]);
      }, i * interval);

      interval = Math.min(parseFloat(m[i][2][0]) * 1000, parseFloat(m[i][2][1]) * 1000, parseFloat(m[i][2][2]) * 1000);
    }
  }

</script>

</body>
</html> -->

>>>>>>> d64141e793585eba81673de8af9f37b259e7a589
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<<<<<<< HEAD
  <title>AsedaChorale</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .nav-link.active {
      font-weight: bold;
    }
    .container {
      margin-top: 20px;
    }
    .navbar {
      background: linear-gradient(135deg, #b5651d, #8d5524);
    }
    .navbar-brand, .nav-link {
      color: #f3f3f3 !important;
    }
    .nav-link:hover, .nav-link:focus {
      color: #ffd700 !important;
    }
    .nav-link.active {
      color: #ffddaa !important;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div id="afriq-container" class="container">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
      <a class="navbar-brand" href="/">AsedaChorale</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="/">HOME</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/anglican/' %}active{% endif %}" href="/anglican/">ANGLICAN</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/presby/' %}active{% endif %}" href="/presby/">P.H.B</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/mhb/' %}active{% endif %}" href="/mhb/">M.H.B</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/anthems/' %}active{% endif %}" href="/anthems/">ANTHEMS/ HIGHLIFES</a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if request.path == '/contact/' %}active{% endif %}" href="/contact/">CONTACT US</a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- MIDI Player -->
    <div id="konva-container" class="my-4"></div>
    <div id="midi-container" class="my-4">
      {% if hymn_numbers %}
      {% if request.path != '/presby/' %}
      <div>
        <midi-player src="{% url 'download_midi' %}" id="midiPlayer" sound-font></midi-player>
      </div>
      {% endif %}
      {% endif %}
    </div>

    <!-- Recording and Playback Feature -->
    <div id="recording-container" class="my-4">
      <button id="startRecord" class="btn btn-primary">Start Recording</button>
      <button id="stopRecord" class="btn btn-danger" disabled>Stop Recording</button>
      <button id="playBack" class="btn btn-success" disabled>Play Back</button>
      <audio id="audioPlayback" controls class="mt-3" hidden></audio>
    </div>

    <!-- Main Content -->
    <main id="workafriq">
      <div class="container">
        {% block content %}
        {% endblock %}
      </div>
    </main>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.22.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>
  <script>
    let mediaRecorder;
    let audioChunks = [];

    const startRecordButton = document.getElementById('startRecord');
    const stopRecordButton = document.getElementById('stopRecord');
    const playBackButton = document.getElementById('playBack');
    const audioPlayback = document.getElementById('audioPlayback');

    startRecordButton.addEventListener('click', async () => {
      audioChunks = [];
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      mediaRecorder = new MediaRecorder(stream);
      
      mediaRecorder.start();
      mediaRecorder.addEventListener('dataavailable', event => {
        audioChunks.push(event.data);
      });

      mediaRecorder.addEventListener('stop', () => {
        const audioBlob = new Blob(audioChunks);
        const audioUrl = URL.createObjectURL(audioBlob);
        audioPlayback.src = audioUrl;
        audioPlayback.hidden = false;
        playBackButton.disabled = false;
      });

      startRecordButton.disabled = true;
      stopRecordButton.disabled = false;
    });

    stopRecordButton.addEventListener('click', () => {
      mediaRecorder.stop();
      startRecordButton.disabled = false;
      stopRecordButton.disabled = true;
    });

    playBackButton.addEventListener('click', () => {
      audioPlayback.play();
    });
  </script>
</body>
</html>
=======
  <title>Play Chord</title>
</head>
<body>

<button onclick="playChordsWithIntervals()">Play Chords</button>

<script>

  function playChord(chord, key) {
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    const masterGain = audioContext.createGain();
    masterGain.connect(audioContext.destination);

    for (let i = 0; i < chord[0].length; i++) {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      const frequency = noteToFrequency(chord[0][i], chord[1][i], key);

      oscillator.type = 'sine'; // You can experiment with different waveforms
      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);

      gainNode.gain.setValueAtTime(0, audioContext.currentTime);
      gainNode.gain.linearRampToValueAtTime(1, audioContext.currentTime + 0.01);
      gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + parseFloat(chord[2][i]));

      oscillator.connect(gainNode);
      gainNode.connect(masterGain);
      oscillator.start();
      oscillator.stop(audioContext.currentTime + parseFloat(chord[2][i]));
    }
  }

  function noteToFrequency(note, octave, key) {
    const notes = ['C', 'C#', 'Db', 'D', 'D#', 'Eb', 'E', 'F', 'F#', 'Gb', 'G', 'G#', 'Ab', 'A', 'A#', 'Bb', 'B'];
    const index = (notes.indexOf(note) + key) % notes.length;
    const baseFrequency = 440; // A4 frequency in Hz
    return baseFrequency * Math.pow(2, (index - 9 + (octave - 4) * 12) / 12);
  }

  function playChordsWithIntervals() {
    const m = [[['C', 'G', 'E', 'C'], ['4', '3', '3', '3'], ['0.5', '0.5', '0.5', '1.0']],
 [['E', 'C', 'G'], ['4', '4', '3'], ['0.5', '0.5', '0.5']],
 [['G', 'C', 'E', 'C'], ['4', '4', '3', '3'], ['1.0', '1.0', '1.0', '1.0']],
 [['G', 'C', 'E', 'C'], ['4', '4', '3', '3'], ['1.0', '1.0', '1.0', '1.0']],
 [['G', 'C', 'E', 'C'], ['4', '4', '3', '3'], ['1.0', '1.0', '1.0', '1.0']],
 [['C', 'C', 'E', 'A'], ['5', '4', '3', '2'], ['0.5', '1.0', '1.0', '0.5']],
 [['B', 'G'], ['4', '2'], ['0.5', '0.5']]];

    let interval = parseFloat(m[0][2][0]) * 1000; // Initial interval in milliseconds

    for (let i = 0; i < m.length; i++) {
      setTimeout(function() {
        playChord(m[i], 4); // 4 is the key of E minor
      }, i * interval);

      interval = Math.min(parseFloat(m[i][2][0]) * 1000, parseFloat(m[i][2][1]) * 1000, parseFloat(m[i][2][2]) * 1000);
    }
  }

</script>

</body>
</html>


[[['E', 'G', 'F#'], ['2', '3', '1'], ['2.0', '2.0', '0.5']],[['D', 'D', 'F#'], ['2', '2', '5'], ['2.0', '2.0', '0.5']], [['E', 'G', 'F#'], ['4', '2', '1'], ['2.0', '2.0', '0.5']]]
>>>>>>> d64141e793585eba81673de8af9f37b259e7a589
